// Generated by CoffeeScript 1.9.0

/*!
 * @license smoothscroll
 * (c) sugarshin
 * License: MIT
 */
(function(root, factory) {
  if (typeof module === 'object' && typeof module.exports === 'object') {
    module.exports = factory(require('jquery'));
  } else {
    root.SmoothScroll || (root.SmoothScroll = factory(root.jQuery));
  }
})(this, function($) {
  var SmoothScroll;
  return SmoothScroll = (function() {
    "use strict";
    SmoothScroll.addEasing = function(name, func) {
      if ($.easing[name] != null) {
        return;
      }
      return $.easing[name] = func;
    };

    SmoothScroll.prototype._defaults = {
      speed: 500,
      easingName: null,
      offset: 0,
      onScrollBefore: function(el) {},
      onScrollAfter: function(el) {}
    };

    SmoothScroll.prototype._configure = function(el, opts) {
      this.$el = $(el);
      this.opts = $.extend({}, this._defaults, opts);
      if (this.$el.attr('href') !== '#') {
        return this.$target = $(this.$el.attr('href'));
      }
    };

    function SmoothScroll(_at_el, opts) {
      this.el = _at_el;
      this._configure(this.el, opts);
      this.events();
    }

    SmoothScroll.prototype.scroll = function() {
      var val, _base;
      if (this.$target == null) {
        return;
      }
      if (typeof (_base = this.opts).onScrollBefore === "function") {
        _base.onScrollBefore(this.$el[0]);
      }
      val = this.$target.offset().top - this.opts.offset;
      $('html, body').stop(true, true).animate({
        scrollTop: val
      }, {
        duration: this.opts.speed,
        easing: this.opts.easingName
      }).promise().done((function(_this) {
        return function() {
          var _base1;
          return typeof (_base1 = _this.opts).onScrollAfter === "function" ? _base1.onScrollAfter(_this.$el[0]) : void 0;
        };
      })(this));
      return this;
    };

    SmoothScroll.prototype.events = function() {
      this.$el.on('click.smoothscroll', (function(_this) {
        return function(ev) {
          ev.preventDefault();
          return _this.scroll();
        };
      })(this));
      return this;
    };

    SmoothScroll.prototype.unbind = function() {
      this.$el.off('click.smoothscroll');
      return this;
    };

    return SmoothScroll;

  })();
});
